{"version":3,"file":"16.js","mappings":"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","sources":["webpack://sakurairo-scripts/./node_modules/color-space/lab.js","webpack://sakurairo-scripts/./node_modules/color-space/rgb.js","webpack://sakurairo-scripts/./node_modules/color-space/xyz.js","webpack://sakurairo-scripts/./node_modules/promise-worker/register.js","webpack://sakurairo-scripts/webpack/bootstrap","webpack://sakurairo-scripts/webpack/runtime/compat get default export","webpack://sakurairo-scripts/webpack/runtime/define property getters","webpack://sakurairo-scripts/webpack/runtime/hasOwnProperty shorthand","webpack://sakurairo-scripts/./node_modules/@kotorik/palette/dist/index.mjs","webpack://sakurairo-scripts/./src/sakura-app/theme-color/worker.ts"],"sourcesContent":["/**\n * CIE LAB space model\n *\n * @module color-space/lab\n */\n'use strict'\n\nvar xyz = require('./xyz');\n\nmodule.exports = {\n\tname: 'lab',\n\tmin: [0,-100,-100],\n\tmax: [100,100,100],\n\tchannel: ['lightness', 'a', 'b'],\n\talias: ['LAB', 'cielab'],\n\n\txyz: function(lab) {\n\t\tvar l = lab[0],\n\t\t\t\ta = lab[1],\n\t\t\t\tb = lab[2],\n\t\t\t\tx, y, z, y2;\n\n\t\tif (l <= 8) {\n\t\t\ty = (l * 100) / 903.3;\n\t\t\ty2 = (7.787 * (y / 100)) + (16 / 116);\n\t\t} else {\n\t\t\ty = 100 * Math.pow((l + 16) / 116, 3);\n\t\t\ty2 = Math.pow(y / 100, 1/3);\n\t\t}\n\n\t\tx = x / 95.047 <= 0.008856 ? x = (95.047 * ((a / 500) + y2 - (16 / 116))) / 7.787 : 95.047 * Math.pow((a / 500) + y2, 3);\n\n\t\tz = z / 108.883 <= 0.008859 ? z = (108.883 * (y2 - (b / 200) - (16 / 116))) / 7.787 : 108.883 * Math.pow(y2 - (b / 200), 3);\n\n\t\treturn [x, y, z];\n\t}\n};\n\n\n//extend xyz\nxyz.lab = function(xyz){\n\tvar x = xyz[0],\n\t\t\ty = xyz[1],\n\t\t\tz = xyz[2],\n\t\t\tl, a, b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1/3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1/3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1/3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n","/**\n * RGB space.\n *\n * @module  color-space/rgb\n */\n'use strict'\n\nmodule.exports = {\n\tname: 'rgb',\n\tmin: [0,0,0],\n\tmax: [255,255,255],\n\tchannel: ['red', 'green', 'blue'],\n\talias: ['RGB']\n};\n","/**\n * CIE XYZ\n *\n * @module  color-space/xyz\n */\n'use strict'\n\nvar rgb = require('./rgb');\n\nvar xyz = {\n\tname: 'xyz',\n\tmin: [0,0,0],\n\tchannel: ['X','Y','Z'],\n\talias: ['XYZ', 'ciexyz', 'cie1931']\n};\n\n\n/**\n * Whitepoint reference values with observer/illuminant\n *\n * http://en.wikipedia.org/wiki/Standard_illuminant\n */\nxyz.whitepoint = {\n\t//1931 2Â°\n\t2: {\n\t\t//incadescent\n\t\tA:[109.85, 100, 35.585],\n\t\t// B:[],\n\t\tC: [98.074, 100, 118.232],\n\t\tD50: [96.422, 100, 82.521],\n\t\tD55: [95.682, 100, 92.149],\n\t\t//daylight\n\t\tD65: [95.045592705167, 100, 108.9057750759878],\n\t\tD75: [94.972, 100, 122.638],\n\t\t//flourescent\n\t\t// F1: [],\n\t\tF2: [99.187, 100, 67.395],\n\t\t// F3: [],\n\t\t// F4: [],\n\t\t// F5: [],\n\t\t// F6:[],\n\t\tF7: [95.044, 100, 108.755],\n\t\t// F8: [],\n\t\t// F9: [],\n\t\t// F10: [],\n\t\tF11: [100.966, 100, 64.370],\n\t\t// F12: [],\n\t\tE: [100,100,100]\n\t},\n\n\t//1964  10Â°\n\t10: {\n\t\t//incadescent\n\t\tA:[111.144, 100, 35.200],\n\t\tC: [97.285, 100, 116.145],\n\t\tD50: [96.720, 100, 81.427],\n\t\tD55: [95.799, 100, 90.926],\n\t\t//daylight\n\t\tD65: [94.811, 100, 107.304],\n\t\tD75: [94.416, 100, 120.641],\n\t\t//flourescent\n\t\tF2: [103.280, 100, 69.026],\n\t\tF7: [95.792, 100, 107.687],\n\t\tF11: [103.866, 100, 65.627],\n\t\tE: [100,100,100]\n\t}\n};\n\n\n/**\n * Top values are the whitepointâs top values, default are D65\n */\nxyz.max = xyz.whitepoint[2].D65;\n\n\n/**\n * Transform xyz to rgb\n *\n * @param {Array} xyz Array of xyz values\n *\n * @return {Array} RGB values\n */\nxyz.rgb = function (_xyz, white) {\n\t//FIXME: make sure we have to divide like this. Probably we have to replace matrix as well then\n\twhite = white || xyz.whitepoint[2].E;\n\n\tvar x = _xyz[0] / white[0],\n\t\ty = _xyz[1] / white[1],\n\t\tz = _xyz[2] / white[2],\n\t\tr, g, b;\n\n\t// assume sRGB\n\t// http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n\tr = (x * 3.240969941904521) + (y * -1.537383177570093) + (z * -0.498610760293);\n\tg = (x * -0.96924363628087) + (y * 1.87596750150772) + (z * 0.041555057407175);\n\tb = (x * 0.055630079696993) + (y * -0.20397695888897) + (z * 1.056971514242878);\n\n\tr = r > 0.0031308 ? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r = (r * 12.92);\n\n\tg = g > 0.0031308 ? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g = (g * 12.92);\n\n\tb = b > 0.0031308 ? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b = (b * 12.92);\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n}\n\n\n\n/**\n * RGB to XYZ\n *\n * @param {Array} rgb RGB channels\n *\n * @return {Array} XYZ channels\n */\nrgb.xyz = function(rgb, white) {\n\tvar r = rgb[0] / 255,\n\t\t\tg = rgb[1] / 255,\n\t\t\tb = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.41239079926595) + (g * 0.35758433938387) + (b * 0.18048078840183);\n\tvar y = (r * 0.21263900587151) + (g * 0.71516867876775) + (b * 0.072192315360733);\n\tvar z = (r * 0.019330818715591) + (g * 0.11919477979462) + (b * 0.95053215224966);\n\n\twhite = white || xyz.whitepoint[2].E;\n\n\treturn [x * white[0], y * white[1], z * white[2]];\n};\n\n\n\nmodule.exports = xyz;\n","'use strict'\n\nfunction isPromise (obj) {\n  // via https://unpkg.com/is-promise@2.1.0/index.js\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function'\n}\n\nfunction registerPromiseWorker (callback) {\n  function postOutgoingMessage (e, messageId, error, result) {\n    function postMessage (msg) {\n      /* istanbul ignore if */\n      if (typeof self.postMessage !== 'function') { // service worker\n        e.ports[0].postMessage(msg)\n      } else { // web worker\n        self.postMessage(msg)\n      }\n    }\n    if (error) {\n      /* istanbul ignore else */\n      if (typeof console !== 'undefined' && 'error' in console) {\n        // This is to make errors easier to debug. I think it's important\n        // enough to just leave here without giving the user an option\n        // to silence it.\n        console.error('Worker caught an error:', error)\n      }\n      postMessage([messageId, {\n        message: error.message\n      }])\n    } else {\n      postMessage([messageId, null, result])\n    }\n  }\n\n  function tryCatchFunc (callback, message) {\n    try {\n      return { res: callback(message) }\n    } catch (e) {\n      return { err: e }\n    }\n  }\n\n  function handleIncomingMessage (e, callback, messageId, message) {\n    var result = tryCatchFunc(callback, message)\n\n    if (result.err) {\n      postOutgoingMessage(e, messageId, result.err)\n    } else if (!isPromise(result.res)) {\n      postOutgoingMessage(e, messageId, null, result.res)\n    } else {\n      result.res.then(function (finalResult) {\n        postOutgoingMessage(e, messageId, null, finalResult)\n      }, function (finalError) {\n        postOutgoingMessage(e, messageId, finalError)\n      })\n    }\n  }\n\n  function onIncomingMessage (e) {\n    var payload = e.data\n    if (!Array.isArray(payload) || payload.length !== 2) {\n      // message doens't match communication format; ignore\n      return\n    }\n    var messageId = payload[0]\n    var message = payload[1]\n\n    if (typeof callback !== 'function') {\n      postOutgoingMessage(e, messageId, new Error(\n        'Please pass a function into register().'))\n    } else {\n      handleIncomingMessage(e, callback, messageId, message)\n    }\n  }\n\n  self.addEventListener('message', onIncomingMessage)\n}\n\nmodule.exports = registerPromiseWorker\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","import r from\"color-space/rgb.js\";import t from\"color-space/xyz.js\";import n from\"color-space/lab.js\";function e(r,t,n){var e=r[t++]-n[0],a=r[t++]-n[1],o=r[t++]-n[2],i=r[t++]-n[3];return Math.pow(e,2)+Math.pow(a,2)+Math.pow(o,2)+Math.pow(i,2)}function a(r,t,n,a){void 0===a&&(a=1);for(var i,u,f,l,c,v=[],h=[],s=[],d=0,m=0;m<t;m++){var p=Math.floor(Math.random()*r.length);h.push(Array.from(r.slice(p,p+4))),s.push(o(0,4)),v.push(o(0,5))}for(;d<n;){for(var g=0;g<r.length;){for(var y=0,b=e(r,g,h[0]),w=1;w<t;w++){var M=e(r,g,h[w]);M<b&&(b=M,y=w)}var A=v[y];A[0]+=r[g++],A[1]+=r[g++],A[2]+=r[g++],A[3]+=r[g++],A[4]++}for(var I=0,j=0;j<t;j++){var x=v[j],z=x[4];if(0==z){var S=Math.floor(Math.random()*r.length);s[j]=Array.from(Array.from(r.slice(S,S+4))),I+=a}else{for(var C=s[j],E=0;E<4;E++)C[E]=x[E]/z;I+=Math.sqrt((f=(i=h[j])[1]-(u=s[j])[1],l=i[2]-u[2],c=i[3]-u[3],Math.pow(i[0]-u[0],2)+Math.pow(f,2)+Math.pow(l,2)+Math.pow(c,2)))}}if(I<=a)return{centroid:s,iteration:d,fit:!0,label:v.map(function(r){return r[4]}),size:r.length};var q=h;h=s,s=q,d++;for(var D=0;D<t;D++){var O=v[D];O[0]=0,O[1]=0,O[2]=0,O[3]=0,O[4]=0}}return{centroid:h,iteration:d,fit:!1,label:v.map(function(r){return r[4]}),size:r.length}}function o(r,t){for(var n=[],e=0;e<t;e++)n.push(r);return n}function i(r,t){var n=document.createElement(\"canvas\"),e=n.getContext(\"2d\");return n.height=t,n.width=r,e}function u(r,t){return new OffscreenCanvas(r,t).getContext(\"2d\")}function f(r){return new Promise(function(t,n){r.complete?t():(r.addEventListener(\"load\",function(r){t(r)}),r.addEventListener(\"error\",function(r){n(r)}))})}function l(r){return v(i,r)}function c(r){return v(u,r)}function v(r,t){var n=t.naturalWidth,e=t.naturalHeight,a=r(n,e);return null==a||a.drawImage(t,0,0,n,e),null==a?void 0:a.getImageData(0,0,n,e)}function h(r,t){return d(i,r,t)}function s(r,t){return d(u,r,t)}function d(r,t,n){var e=t.naturalWidth,a=t.naturalHeight,o=e*a/n;if(o>1){var i=e/Math.sqrt(o),u=a/Math.sqrt(o),f=r(i,u);return null==f||f.drawImage(t,0,0,i,u),null==f?void 0:f.getImageData(0,0,i,u)}var l=r(e,a);return null==l||l.drawImage(t,0,0),null==l?void 0:l.getImageData(0,0,e,a)}function m(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function p(r){return r.map(function(r){return r/255})}function g(r){var t,n,e,a,o,i,u=(i=(e=r)[2],(a=e[0])>(o=e[1])?o>i?[a,i]:a>i?[a,o]:[i,o]:o>i?i>a?[o,a]:[o,i]:[i,a]),f=u[0],l=u[1],c=f-l,v=f+l;if(0==c)t=0,n=0;else{if(f==r[0]){var h=60*(r[1]-r[2])/c;t=h<0?h+360:h}else t=f==r[1]?60*(r[2]-r[0])/c+120:60*(r[0]-r[1])/c+240;n=0==v?0:v<=1?c/v:c/(2-v)}return[t,n,v/2,r[3]]}var y=function(r){return void 0===r&&(r=[0,1,2,3]),function(t,n){for(var e,a,o=function(r,t){var n=\"undefined\"!=typeof Symbol&&r[Symbol.iterator]||r[\"@@iterator\"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=function(r,t){if(r){if(\"string\"==typeof r)return m(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return\"Object\"===n&&r.constructor&&(n=r.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(r):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(r,t):void 0}}(r))){n&&(r=n);var e=0;return function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}(r);!(a=o()).done;){var i=a.value;if(0!=(e=t[i]-n[i]))return e}return e}},b=function(r){return\"hsla(\"+r[0]+\"deg,\"+100*r[1]+\"%,\"+100*r[2]+\"%,\"+r[3]+\")\"},w=function(r){return\"rgba(\"+r.map(function(r){return Math.floor(r)}).join(\",\")+\")\"};function M(n){for(var e=[],a=0;a<n.length;a+=4){var o=n.slice(a,a+4),i=o[3],u=o.slice(0,3),f=r.xyz(u),l=t.lab(f);e.push.apply(e,l.concat([i]))}return e}function A(r){var e=r.slice(0,3),a=r[3],o=n.xyz(e),i=t.rgb(o);return[].concat(i,[a])}export{f as awaitImage,M as convertToLab,y as getHSLAComparer,b as hslaCSSText,a as kmeans,A as labaToRGBA,p as normalizeRGBA,l as readImage,c as readImageAsync,h as readImageDownsampling,s as readImageDownsamplingAsync,w as rgbaCSSText,g as rgbaToHSLA};\n//# sourceMappingURL=index.mjs.map\n","import { kmeans, convertToLab } from \"@kotorik/palette\";\nimport registerPromiseWorker from 'promise-worker/register';\nregisterPromiseWorker((data) => {\n    const { img, k, iteration } = data;\n    const result = kmeans(convertToLab(img.data), k, iteration);\n    return result;\n});\n"],"names":["xyz","module","exports","name","min","max","channel","alias","lab","x","y","z","y2","l","a","b","Math","pow","rgb","A","C","D50","D55","D65","D75","F2","F7","F11","E","whitepoint","_xyz","white","r","g","callback","postOutgoingMessage","e","messageId","error","result","postMessage","msg","self","ports","console","message","addEventListener","payload","data","Array","isArray","length","Error","obj","res","err","tryCatchFunc","then","finalResult","finalError","handleIncomingMessage","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","t","i","push","img","k","iteration","u","f","c","v","h","s","m","p","floor","random","from","slice","w","M","I","j","S","sqrt","centroid","fit","label","map","size","q","D","O","apply","concat"],"sourceRoot":""}